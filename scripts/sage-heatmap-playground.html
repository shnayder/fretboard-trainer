<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sage Heatmap Playground</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 1100px;
      padding: 1.5rem 1rem;
      margin: 0 auto;
      color: #333;
      line-height: 1.4;
      background: #fafaf8;
    }
    h1 { font-size: 1.4rem; margin-bottom: 0.25rem; }
    .subtitle { color: #666; font-size: 0.8rem; margin-bottom: 1.5rem; }
    h2 { font-size: 0.95rem; margin: 0 0 0.4rem; color: #444; }
    .desc { font-size: 0.75rem; color: #888; margin-bottom: 0.5rem; }

    .candidate {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 0.75rem;
      margin-bottom: 1rem;
      background: #fff;
    }
    .candidate.winner {
      border-color: hsl(90, 35%, 45%);
      box-shadow: 0 0 0 2px hsla(90, 35%, 45%, 0.2);
    }

    /* Heatmap strip */
    .strip {
      display: flex;
      gap: 3px;
      margin-bottom: 0.5rem;
    }
    .strip .cell {
      flex: 1;
      height: 40px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.6rem;
      font-weight: 600;
      border: 1px solid rgba(0,0,0,0.08);
    }

    /* Mock fretboard row */
    .fret-row {
      display: flex;
      gap: 4px;
      margin-bottom: 3px;
    }
    .fret-dot {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.55rem;
      font-weight: 600;
      border: 1px solid rgba(0,0,0,0.06);
    }
    .fret-grid { margin-bottom: 0.5rem; }
    .legend {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      font-size: 0.6rem;
      color: #666;
    }
    .legend .swatch {
      width: 12px; height: 12px;
      border-radius: 3px;
      display: inline-block;
      vertical-align: middle;
      margin-right: 2px;
      border: 1px solid rgba(0,0,0,0.1);
    }

    .notes { font-size: 0.65rem; color: #999; margin-top: 0.25rem; }

    .section-label {
      font-size: 0.8rem;
      font-weight: 700;
      color: hsl(100, 15%, 35%);
      margin: 1.5rem 0 0.5rem;
      padding-bottom: 0.25rem;
      border-bottom: 1px solid #e0e0d8;
    }
  </style>
</head>
<body>
  <h1>Sage Heatmap Playground</h1>
  <div class="subtitle">
    12 candidate scales for the Sage theme. Each shows a strip + mock fretboard with
    mixed mastery levels. Pick favorites and we'll wire them in.
    <br>Text contrast target: all labels legible at every level.
  </div>

  <div id="candidates"></div>

  <script>
    // --- Candidate heatmap scales ---
    // Format: { name, desc, none, levels: [1..5], textColors: [none,1,2,3,4,5] }
    // textColors optional — defaults to figuring it out from lightness

    var candidates = [
      // === SECTION: "Bright ends, faded middle" ===
      {
        section: 'Bright Ends, Faded Middle',
        name: 'A. Terracotta ↔ Sage (V-shaped lightness)',
        desc: 'Warm terracotta at "slow" end, faded olive in middle, rich sage at "fast" end. Both extremes pop.',
        none: 'hsl(60, 5%, 93%)',
        levels: [
          'hsl(15, 55%, 62%)',   // warm terracotta — bright
          'hsl(35, 35%, 65%)',   // faded warm
          'hsl(55, 22%, 62%)',   // muted olive — faded middle
          'hsl(72, 32%, 50%)',   // medium sage
          'hsl(88, 50%, 35%)',   // rich deep sage — bright
        ],
      },
      {
        name: 'B. Coral ↔ Forest (wider hue, V lightness)',
        desc: 'Coral-pink at slow end, washed-out middle, rich forest at fast. Max contrast at extremes.',
        none: 'hsl(60, 5%, 93%)',
        levels: [
          'hsl(8, 55%, 60%)',    // coral — vivid
          'hsl(30, 30%, 66%)',   // faded tan
          'hsl(55, 18%, 62%)',   // washed olive — low saturation
          'hsl(78, 30%, 48%)',   // olive-green
          'hsl(95, 48%, 33%)',   // deep forest — vivid
        ],
      },
      {
        name: 'C. Peach ↔ Sage (gentle V)',
        desc: 'Softer version — peach at slow, muted buff middle, medium sage at fast.',
        none: 'hsl(60, 5%, 93%)',
        levels: [
          'hsl(18, 50%, 68%)',   // peach
          'hsl(38, 30%, 66%)',   // warm buff
          'hsl(55, 20%, 60%)',   // muted yellow-olive
          'hsl(72, 30%, 48%)',   // olive-sage
          'hsl(88, 42%, 38%)',   // sage
        ],
      },

      // === SECTION: Diverging (like a weather map) ===
      {
        section: 'Diverging (weather-map style)',
        name: 'D. Red-brown ↔ Green (classic diverging)',
        desc: 'Unmistakable bad/good. Brown-red for slow, neutral center, green for fast. Colorblind: use lightness.',
        none: 'hsl(60, 5%, 93%)',
        levels: [
          'hsl(10, 50%, 55%)',   // muted red-brown
          'hsl(25, 30%, 62%)',   // faded warm
          'hsl(50, 15%, 65%)',   // neutral center
          'hsl(75, 28%, 50%)',   // olive
          'hsl(95, 45%, 38%)',   // deep green
        ],
      },
      {
        name: 'E. Copper ↔ Teal-sage (complementary diverging)',
        desc: 'Warm copper for slow, cool sage for fast. Natural complementary pair.',
        none: 'hsl(60, 5%, 93%)',
        levels: [
          'hsl(22, 55%, 58%)',   // copper
          'hsl(40, 28%, 62%)',   // warm buff
          'hsl(60, 15%, 60%)',   // neutral olive
          'hsl(80, 30%, 47%)',   // sage-green
          'hsl(100, 40%, 36%)',  // deep sage-teal
        ],
      },

      // === SECTION: Sequential warm→cool ===
      {
        section: 'Sequential (warm → cool)',
        name: 'F. Terracotta → Sage (current, lighter text)',
        desc: 'Current scale from last commit. Shown for comparison.',
        none: 'hsl(90, 8%, 92%)',
        levels: [
          'hsl(18, 45%, 70%)',
          'hsl(38, 50%, 60%)',
          'hsl(58, 40%, 50%)',
          'hsl(75, 38%, 42%)',
          'hsl(88, 45%, 35%)',
        ],
      },
      {
        name: 'G. Warm → Sage (higher saturation)',
        desc: 'Like F but punchier saturation throughout. More vivid.',
        none: 'hsl(60, 5%, 93%)',
        levels: [
          'hsl(15, 55%, 68%)',
          'hsl(35, 55%, 58%)',
          'hsl(55, 45%, 50%)',
          'hsl(72, 42%, 42%)',
          'hsl(88, 52%, 33%)',
        ],
      },

      // === SECTION: Sequential cool→sage ===
      {
        section: 'Sequential (cool → sage)',
        name: 'H. Purple → Sage (wide hue arc)',
        desc: 'Cool purple at slow, through blue and teal, ending at sage. Wide 180° hue span.',
        none: 'hsl(60, 5%, 93%)',
        levels: [
          'hsl(280, 30%, 68%)',  // lavender
          'hsl(230, 30%, 58%)',  // blue
          'hsl(180, 30%, 50%)',  // teal
          'hsl(130, 32%, 42%)',  // green
          'hsl(88, 45%, 35%)',   // sage
        ],
      },
      {
        name: 'I. Steel → Sage (narrower, professional)',
        desc: 'Steel blue at slow through teal to sage. Subtle, 130° arc.',
        none: 'hsl(60, 5%, 93%)',
        levels: [
          'hsl(215, 28%, 65%)',  // steel blue
          'hsl(190, 25%, 55%)',  // blue-teal
          'hsl(160, 28%, 48%)',  // teal
          'hsl(125, 30%, 42%)',  // green
          'hsl(88, 42%, 35%)',   // sage
        ],
      },

      // === SECTION: Brightness-focused ===
      {
        section: 'Brightness-focused',
        name: 'J. High-contrast endpoints (dark slow, light fast)',
        desc: 'Dark brown-red for slow, bright lime-sage for fast. Max brightness at mastery.',
        none: 'hsl(60, 5%, 93%)',
        levels: [
          'hsl(12, 40%, 42%)',   // dark brown-red
          'hsl(30, 30%, 50%)',   // medium brown
          'hsl(52, 25%, 55%)',   // olive
          'hsl(72, 35%, 52%)',   // medium sage
          'hsl(85, 55%, 45%)',   // bright sage-green
        ],
      },
      {
        name: 'K. Vivid terracotta → vivid sage (high chroma)',
        desc: 'Both ends maximally saturated. Middle stays muted. "Neon endpoints."',
        none: 'hsl(60, 5%, 93%)',
        levels: [
          'hsl(12, 65%, 58%)',   // vivid terracotta
          'hsl(35, 30%, 60%)',   // muted buff
          'hsl(55, 15%, 58%)',   // very muted olive
          'hsl(72, 28%, 50%)',   // medium sage
          'hsl(88, 60%, 38%)',   // vivid sage
        ],
      },
      {
        name: 'L. Amber → Sage (narrow warm-to-cool)',
        desc: 'Warm amber start, smooth 60° transition to sage. Feels like autumn leaves.',
        none: 'hsl(60, 5%, 93%)',
        levels: [
          'hsl(35, 55%, 62%)',   // amber
          'hsl(48, 40%, 56%)',   // gold
          'hsl(60, 30%, 50%)',   // olive-yellow
          'hsl(75, 35%, 44%)',   // yellow-sage
          'hsl(88, 48%, 36%)',   // deep sage
        ],
      },
    ];

    // --- Text color helper ---
    function textColorFor(hsl) {
      // Parse lightness from hsl(h, s%, l%)
      var match = hsl.match(/(\d+)%\s*\)/);
      if (!match) return '#333';
      var l = parseInt(match[1]);
      // Also factor in saturation for mid-lightness colors
      var sMatch = hsl.match(/,\s*(\d+)%/);
      var s = sMatch ? parseInt(sMatch[1]) : 0;
      // Dark text on light backgrounds, white text on dark
      // For saturated mid-range colors, prefer white earlier
      if (l < 45) return 'white';
      if (l < 55 && s > 30) return 'white';
      return '#333';
    }

    // --- Mock fretboard data (6 strings, 8 frets) ---
    // Values: -1=none, 0-4=level index
    var fretData = [
      [ 4,  0,  1, -1, -1,  2,  3,  4],
      [ 0,  0, -1, -1,  1,  2,  3,  3],
      [-1, -1, -1,  1,  2,  2,  3,  4],
      [ 1,  0, -1, -1,  2,  3,  4,  4],
      [-1, -1,  0,  1,  1,  2,  3,  3],
      [ 4,  0,  1,  2,  3, -1,  4,  4],
    ];
    var noteNames = ['E','F','F#','G','G#','A','A#','B'];

    // --- Render ---
    var container = document.getElementById('candidates');
    var html = '';
    var currentSection = '';

    for (var i = 0; i < candidates.length; i++) {
      var c = candidates[i];

      if (c.section && c.section !== currentSection) {
        currentSection = c.section;
        html += '<div class="section-label">' + currentSection + '</div>';
      }

      var all = [c.none].concat(c.levels);
      var labels = ['none','1 (slow)','2','3','4','5 (fast)'];

      html += '<div class="candidate">';
      html += '<h2>' + c.name + '</h2>';
      html += '<div class="desc">' + c.desc + '</div>';

      // Strip
      html += '<div class="strip">';
      for (var j = 0; j < all.length; j++) {
        var tc = textColorFor(all[j]);
        html += '<div class="cell" style="background:' + all[j] + ';color:' + tc + ';">' + labels[j] + '</div>';
      }
      html += '</div>';

      // Mock fretboard
      html += '<div class="fret-grid">';
      for (var row = 0; row < fretData.length; row++) {
        html += '<div class="fret-row">';
        for (var col = 0; col < fretData[row].length; col++) {
          var lvl = fretData[row][col];
          var bg = lvl < 0 ? c.none : c.levels[lvl];
          var txtc = textColorFor(bg);
          html += '<div class="fret-dot" style="background:' + bg + ';color:' + txtc + ';">' + noteNames[col] + '</div>';
        }
        html += '</div>';
      }
      html += '</div>';

      // Legend
      html += '<div class="legend">';
      html += '<span><span class="swatch" style="background:' + c.none + '"></span>No data</span>';
      var legLabels = ['Needs work','Fading','Getting there','Solid','Automatic'];
      for (var k = 0; k < 5; k++) {
        html += '<span><span class="swatch" style="background:' + c.levels[k] + '"></span>' + legLabels[k] + '</span>';
      }
      html += '</div>';

      html += '</div>'; // .candidate
    }

    container.innerHTML = html;
  </script>
</body>
</html>
